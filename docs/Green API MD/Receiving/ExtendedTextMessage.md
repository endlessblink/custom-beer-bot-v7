# Incoming text message or URL message#

Original URL: https://green-api.com/en/docs/api/receiving/notifications-format/incoming-message/ExtendedTextMessage/

green-api/issues Home Documents Documents Index Quick start Quick start Before you start Plans Execute requests Postman collection API documents API documents Overview Account Account Account - overview Get instance settings Set instance settings Get instance state Reboot instance Logout instance Get QR code Get QR code via websocket Link with phone number Set profile picture Get WhatsApp account information Archive Archive Get instance connection status Sending Sending Sending - overview Send text Send Poll Send video, audio, image, document Send video, audio, image, document via URL Upload file Send location Send contact Forward messages Archive Archive Send Buttons Send Template Buttons Send List Message Receiving Receiving Conception HTTP API HTTP API HTTP API technology Receive notification Delete notification Webhook Endpoint Webhook Endpoint Webhook Endpoint technology Incoming notifications format Incoming notifications format Overview Incoming message Incoming message Incoming messages Incoming text message Incoming text message or URL message Incoming text message or URL message Table of contents Webhook Webhook parameters Webhook body example Message from group chat webhook body example Link or text and contact quote incoming message webhook body example Link and image quote incoming message webhook body example Advertising incoming message webhook body example Incoming image, video, audio, document message Incoming location message Incoming contact message Incoming contacts array message Incoming buttons message Incoming selection list message Incoming template buttons message Incoming sticker message Incoming reaction message Group invitation incoming message Incoming poll message Incoming poll update message Selecting buttons Selecting buttons Simple button selection Template button selection List element selection Outgoing message Outgoing message Message sent from phone Message sent via API Outgoing message status Others Others Instance status Instance socket status Incoming call Exceeding limitation on plan Objects Objects Incoming webhooks types Archive Archive Quoted message Device status Contact avatar Incoming block Get files Get files Download file from incoming message Journals Journals Journals - review Get chat history Get chat message Get incoming messages journal Get outgoing messages journal Queues Queues Queues - overview Show messages queue Clear messages queue Groups Groups Groups - overview Create group Change group name Get group data Add group participant Delete group participant Set group admin rights Remove group admin rights Set group picture Leave group Statuses (Î²-version) Statuses (Î²-version) Statuses - overview Statuses Statuses Send text status Send voice status Send media status Delete status Statistics Statistics Get status statistic History History Get incoming statuses Get outgoing statuses Read mark Read mark Read mark - overview Mark chat as read Service methods Service methods Service methods - overview Check WhatsApp availability Get avatar Get contacts Get Contact Info Delete message Archive Chat UnarchiveChat Change the settings of disappearing chat messages Others Others Chat Id Messages sending delay Common errors Reaching the limits on the Developer plan Integration Recommendations Integration Recommendations Integration Recommendations - overview Creating and configuring an instance Ð¡reating and configuring an instance using the partner key Connecting a phone number to the GREEN API service Tracking the state of an instance Working with incoming calls Using GREEN API Hosts Working with incoming webhooks Rate limiter Archive Archive Device (phone) Device (phone) Device - overview Get device info Partners Partners Overview Get the list of all instances Create instance Delete instance Console Console Overview Registration FAQ FAQ FAQ Mobile App Mobile App How to install the GREEN-API app on Android? How to properly use materials from the GREEN-API on another website? How to properly use materials from the GREEN-API on another website? How to properly use materials from the GREEN-API on another website? WhatsApp features WhatsApp features What are the features of sending and receiving messages to numbers of different countries? How to text on WhatsApp first? How to set up device pairing? How to display company name and logo in chats? How to format text and use control characters? How to send emoji or other symbol via the API? How to run a VBA query? How to confirm the security code in WhatsApp? How to use polls as buttons? How to use a proxy server in WhatsApp? How to transfer your WhatsApp account to another phone? How to use the click to chat feature? How to make links in messages active? What are the statuses of messages in WhatsApp? How to identify your WhatsApp subscribers? How to get a green check mark in WhatsApp? How to protect personal data? How to register phone number on WhatsApp? How to log incoming calls in WhatsApp? Working with files via API Working with files via API How to send file by sendFileByUrl method using external storage? How to send a file? What file types does the API support? WhatsApp Errors WhatsApp Errors Why are incoming notifications slow (webhooks)? What to do with the error "WhatsApp is temporarily unavailable. Try again in 1 hour."? Why can not I connect the device to the API? What to do when receiving yellowCard status? Why is logout happening? Why messages are sent slowly? Why is the message status "sent"? What to do when receiving the error "Maximum number of devices connected"? Why does the SWE001 error often occur? Why are members not being added to the group? How can I prevent a QR session from being permanently disconnected? What to do when you receive a "Message Waiting" notification? Why can`t I download or update WhatsApp? Account blocking Account blocking How to protect number from ban? What to do if your instance is locked? What to do if your number is blocked? Why is re-blocking happening? How to make mailings without the risk of blocking? How to implement mailings via CRM? How does the use of the WA Business application affect the risk of blocking? Is there liability for messaging on WhatsApp if Meta Platforms Inc is prohibited in Russia? How to determine if WhatsApp has unblocked my number? What types of blocks can WhatsApp impose? How my WhatsApp number is protected from blocking? SDK Chatbots Integrations Releases Blog News FAQ Table of contents Webhook Webhook parameters Webhook body example Message from group chat webhook body example Link or text and contact quote incoming message webhook body example Link and image quote incoming message webhook body example Advertising incoming message webhook body example Incoming text message or URL message# This section describes messageData object incoming webhook format for incoming text message with URL. For a description of the general format of incoming webhooks, refer to Incoming messages section. To get incoming webhooks of this type, two conditions must be true: typeWebhook = incomingMessageReceived messageData.typeMessage = extendedTextMessage Configuring an instance To receive incoming notifications about extended text messages, you need to enable the settings using one of the following options: Through console enable the setting Get notifications about incoming messages and files Through the SetSettings method enable the setting incomingWebhook Webhook# Webhook parameters# messageData object parameters Parameter Type Description typeMessage string Incoming message type. For messages of this type, the parameter takes on the value extendedTextMessage extendedTextMessageData object Data object on incoming link with meta-data quotedMessage object Quoted message data object. Present only if the message itself is a quote extendedTextMessageData object parameters Parameter Type Description text string Link text or ordinary text description string Link description, may be empty title string Link title, may be empty containsAutoReply boolean Whether the message contains an auto reply (only for advertisement messages) mediaType string Message media type, for example "IMAGE" (only for advertisement messages) showAdAttribution boolean Whether the advertisement details should be shown (only for advertisement messages) sourceId string Advertisement Id (only for advertisement messages) sourceType string Source type, for example "ad" (only for advertisement messages) sourceUrl string Advertisement url (only for advertisement messages) conversionSource string Message localization (only for advertising messages) entryPointConversionApp string Message source ( only for advertising messages) jpegThumbnail string base64-coded image preview, may be absent thumbnailUrl string Image preview url (only for advertisement messages) isForwarded boolean Whether the message is forwarded, takes on values true/false forwardingScore integer Number of message forwards previewType string Preview type (only for advertisement messages) previewType:None value is deprecated quotedMessage object parameters Parameter Type Description stanzaId string quoted message id participant string quoted message sender's id typeMessage string quoted message type The rest of the fields are filled depending on the type of the quoted message and are identical to the fields of incoming messages described in Incoming messages section Webhook body example# { "typeWebhook": "incomingMessageReceived", "instanceData": { "idInstance": 1234, "wid": "11001234567@c.us", "typeInstance": "whatsapp" }, "timestamp": 1588091580, "idMessage": "F7AEC1B7086ECDC7E6E45923F5EDB825", "senderData": { "chatId": "79001234568@c.us", "sender": "79001234568@c.us", "chatName": "John", "senderName": "John", "senderContactName": "John Doe" }, "messageData": { "typeMessage": "extendedTextMessage", "extendedTextMessageData": { "text": "https://green-api.com/docs/video", "description": "Green API docs show how you can develop the WhatsApp Bot", "title": "How to develop WhatsApp Bot", "jpegThumbnail": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYG==", "forwardingScore": 4, "isForwarded": true } } } Message from group chat webhook body example# { "typeWebhook": "incomingMessageReceived", "instanceData": { "idInstance": 1234, "wid": "11001234567@c.us", "typeInstance": "whatsapp" }, "timestamp": 1732268220, "idMessage": "2D9D6721A977D369246509EBE0CE44CA", "senderData": { "chatId": "120363369140947676@g.us", "chatName": "Group", "sender": "79001234568@c.us", "senderName": "John", "senderContactName": "John Doe" }, "messageData": { "typeMessage": "extendedTextMessage", "extendedTextMessageData": { "text": "https://green-api.com/docs/video", "description": "Green API docs show how you can develop the WhatsApp Bot", "title": "How to develop WhatsApp Bot", "jpegThumbnail": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYG==", "forwardingScore": 4, "isForwarded": true } } } Link or text and contact quote incoming message webhook body example# { "typeWebhook": "incomingMessageReceived", "instanceData": { "idInstance": 1234, "wid": "11001234567@c.us", "typeInstance": "whatsapp" }, "timestamp": 1588091580, "idMessage": "F7AEC1B7086ECDC7E6E45923F5EDB825", "senderData": { "chatId": "79001234568@c.us", "sender": "79001234568@c.us", "senderName": "John", "senderContactName": "John Doe" }, "messageData": { "typeMessage": "quotedMessage", "extendedTextMessageData": { "text": "https://yandex.ru/former&utm_source=home&utm_content=main_informer&utm_term=main_number", "stanzaId": "0EA554E587820E35309858AE265BE7EA", "participant": "79001230000@c.us", "forwardingScore": 4, "isForwarded": true }, "quotedMessage": { "stanzaId": "9A73322488DCB7D9689A6112F2528C9D", "participant": "79061230000@c.us", "typeMessage": "contactMessage", "contact": { "displayName": "Green-Api", "vcard": "BEGIN:VCARD\nVERSION:3.0\nN:Green-Api\nitem1.TEL;waid=79001230000\nitem1.X-ABLabel:Mobile\nEND:VCARD" } } } } Link and image quote incoming message webhook body example# { "typeWebhook": "incomingMessageReceived", "instanceData": { "idInstance": 1234, "wid": "11001234567@c.us", "typeInstance": "whatsapp" }, "timestamp": 1588091580, "idMessage": "F7AEC1B7086ECDC7E6E45923F5EDB825", "senderData": { "chatId": "79001234568@c.us", "sender": "79001234568@c.us", "senderName": "John", "senderContactName": "John Doe" }, "messageData": { "typeMessage": "quotedMessage", "extendedTextMessageData": { "text": "https://yandex.ru/pogoda/?utm_medium=source=home&utm_content=main_informer&utm_term=main_number", "stanzaId": "B4AA239D112CB2576897B3910FEDE26E", "participant": "79001230000@c.us", "forwardingScore": 4, "isForwarded": true }, "quotedMessage": { "stanzaId": "9A73322488DCB7D9689A6112F2528C9D", "participant": "79061230000@c.us", "typeMessage": "imageMessage", "downloadUrl": "", "caption": "", "jpegThumbnail": "" } } } Advertising incoming message webhook body example# { "typeWebhook": "incomingMessageReceived", "instanceData": { "idInstance": 1234, "wid": "11001234567@c.us", "typeInstance": "whatsapp" }, "timestamp": 1588091580, "idMessage": "F7AEC1B7086ECDC7E6E45923F5EDB825", "senderData": { "chatId": "79001234568@c.us", "chatName": "John", "sender": "79001234568@c.us", "senderName": "John", "senderContactName": "John Doe" }, "messageData": { "typeMessage": "extendedTextMessage", "extendedTextMessageData": { "text": "https://fb.me/gUdvBdhtH", "description": "ÐÐ¾Ð²ÑÐ¹ Ð¸Ð½ÑÑÐ°Ð½Ñ Ð´Ð»Ñ Ð²Ð°ÑÐµÐ³Ð¾ Ð±Ð¸Ð·Ð½ÐµÑÐ°!", "title": "Green API", "containsAutoReply": false, "mediaType": "IMAGE", "showAdAttribution": false, "sourceId": "122210486228016873", "sourceType": "post", "sourceUrl": "https://fb.me/gUdvBdhtH", "conversionSource": "FB_Ads", "entryPointConversionApp": "instagram", "jpegThumbnail": "/9j/4AAQSkZJRgABAQAAAQABAAD/7QCEUGhvdG9zaG9wIDMuMAA4qIJUeuMEjYwGc9BtFMXTYvgsnm4ADy6HLLZDqn1Ye5RMev+ae1hED2B9dQIARwjvDIwYCg4/r/9k=", "thumbnailUrl": "https://scontent.xx.fbcdn.net/v/t39.30808-6/436945887_122115998378256688_307643393252141869_n.jpg?stp=dst-jpg_s851x315&_nc_cat=111&ccb=1-7&_nc_sid=5f2048&_nc_ohc=x61r6W-VrJIAb69T4Dl&_nc_ad=z-m&_nc_cid=0&_nc_ht=scontent.xx&oh=00_AfDLFkjNOBYEntBu6SYaUOxDuxbvarjKha9Ez5RQUXjsfg&oe=662D7680", "previewType": "" } } }